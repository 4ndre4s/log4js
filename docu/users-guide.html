<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="robots" content="ALL">
    <meta name="description" content="Log4js - The Logging Framework for JavaScript">
 
    <link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Log4js - The Logging Framework for JavaScript</title>
  </head>

  <body>
	<div style="float: left; padding-left: 270px;" class="ad" id="adHeader">
	<script type="text/javascript">
	<!--
		google_ad_client = "pub-2184810574476423";
		google_ad_width = 468;
		google_ad_height = 60;
		google_ad_format = "468x60_as";
		google_ad_type = "text_image";
		//2007-04-24: log4js
		google_ad_channel = "0813063002";
		google_color_border = "FFFFFF";
		google_color_bg = "FFFFFF";
		google_color_link = "009ACE";
		google_color_text = "000000";
		google_color_url = "000066";
	//--></script>
	<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script>
	</div>      
    <header>
      <div class="inner">
        <h1><img src="../images/project-logo.jpg" alt="Log4js"> Log4js</h1>
        <h2>Log4js - The Logging Framework for JavaScript</h2>
        <a href="https://github.com/stritti/log4js" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
<h1>Log4js - Users Guide</h1>
<div class="abstract">
        
         This is the users guide for Log4js. Use this guide to learn how to
         use Log4js efficient in your projects.
    </div>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#into">Introduction</a>
</li>
<li>
<a href="#install">Download and Installation</a>
</li>
<li>
<a href="#usage">Usage</a>
</li>
<li>
<a href="#configuration">Configuration</a>
</li>
<li>
<a href="#advanced">Advanced</a>
<ul class="minitoc">
<li>
<a href="#classdiagramm">Class Diagram</a>
</li>
<li>
<a href="#ajax">Usage of AjaxAppender</a>
</li>
<li>
<a href="#performance">Performance</a>
</li>
<li>
<a href="#newClasses">Create new Appenders and Layouts</a>
</li>
</ul>
</li>
<li>
<a href="#license">License</a>
</li>
<li>
<a href="#references">References</a>
</li>
</ul>
</div>

        
<a name="N10028"></a><a name="into"></a>
<h2 class="underlined_10">Introduction</h2>
<div class="section">
<p> 
<em>Log4js</em> is a very small but usefull JavaScript library 
                to log events in your scripts. Often it is not useful to use 
                <span class="codefrag">alert('debug message');</span> spreaded through your 
                code. On the other hand a debugger like venkman can help you 
                also only if you debug on your own computer and when you can 
                use FireFox as browser. </p>
<p> But the most problems will occure if you publish your web 
                application. Probably you have first a team of testers which 
                tests your software, but they will not have experiences with 
                debugging JavaScript. </p>
<p> 
<em>Log4js</em> will solve these problems and probably some 
                more. You simply add Log4js to your scripts and the library 
                loggs all your events like you configured. The installation and 
                configuration will be described in the next sections. </p>
<p> Using <em>Log4js</em> you need not to modify your complete 
                scripts if you are going productive as you have if you use the 
                alert-dialogs. You just configure if you still need logs and 
                how they should be logged on productive system. Nothing more. 
                </p>
</div>
        
<a name="N10047"></a><a name="install"></a>
<h2 class="underlined_10">Download and Installation</h2>
<div class="section">
<p> To use <em>Log4js</em> you have to download the library first 
                from the <a href="http://developer.berlios.de/project/showfiles.php?group_id=5368">download section</a> of 
                the project. The library is available in two different 
                archives. It is up to you, if you prefere zip archive or tar.gz 
                archive. The content is the same. </p>
<div class="note">
<div class="label">Preserve Directory Structure</div>
<div class="content">Extract the archive to a 
            	directory of your choice, but 
                preserve the directory structure of the archive! </div>
</div>
<p> After extracting the archive, you will find following directory 
                structure: </p>
<ul>
                
<li class="dir">log4js-{version}
                    <ul>
                        
<li class="dir">docs
                        <ul>
                            
<li class="dir">api
                                <ul>
                                    
<li>index.html <em>(the API documentation)</em>
</li>
                                
</ul>
                            
</li>
                            
<li class="file">users-guide.pdf <em>(this users guide)</em>
</li>
                        
</ul>    
                        
</li>
                        
<li class="dir">examples</li>
                        
<li class="dir">lib
                            <ul>
                                
<li class="file">log4js-lib.js <em>(compressed version of Log4js library)</em>
</li>
                            
</ul>    
                        
</li>
                        
<li class="dir">src
                            <ul>
                                
<li>js
                                    <ul>
                                        
<li class="file">log4js.js <em>(uncompressed version of Log4js library)</em>
</li>
                                    
</ul>
                                
</li>
                            
</ul>    
                        
</li>    
                    
</ul>                        
                
</li>                
            
</ul>
<div class="note">
<div class="label">Two versions of Log4js</div>
<div class="content">
				There are two versions of Log4js. One file in the lib-directory called 
					<span class="codefrag">log4js-lib.js</span>, which is a compressed version of Log4js. 
				This can be used in productive systems to reduce bandwidth.
					<br>
				The <span class="codefrag">log4js.js</span> file in the <span class="codefrag">src/js</span> directory is 
				the origin log4js library. Uncompressed and much more readable. 
				Use this, if you want to understand, what log4js is doing internal.
			</div>
</div>
</div>
        
<a name="N100B6"></a><a name="usage"></a>
<h2 class="underlined_10">Usage</h2>
<div class="section">
<p>
            	Create a new JavaScript project or take one of yours existing projects and
            	copy the <span class="codefrag">log4js.js</span> file to it. No more files are required for 
            	logging.
            </p>
<p>
            	After adding the <span class="codefrag">log4js.js</span> file to your project, you have to
            	include it in your scripts using following line. 
            		<br>
<br>
            	
<strong><span class="codefrag">
            		&lt;script src="js/log4js.js" type="text/javascript"&gt;&lt;/script&gt;
            	</span></strong>
            	
<br>
<br>
            	See the following example HTML file:
            </p>
<pre class="code">
  &lt;html&gt;
  &lt;head&gt;
   &lt;title&gt;Log4js Example&lt;/title&gt;
   
   &lt;script src="js/log4js.js" type="text/javascript"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
						
  &lt;/body&gt;
  &lt;/html&gt;
  </pre>
<p>
            	Now the logger has to be initialized before it can be used. Log4js provides
            	a method for this, where you pass a category for your logs and you get an
            	instance of a logger: <br>
<br>
            	
<strong><span class="codefrag">var myLogger = new Log4js.getLogger("myCategory");</span></strong>
            	
<br>
<br>
            
</p>
<div class="note">
<div class="label">Note</div>
<div class="content">The loggers are cached and if you request a second time
            	a logger for the same category the old one is returned.</div>
</div>
<p>
            	Now the logger can be used like following code snippets are showing:
            </p>
<pre class="code">
   myLogger.info('an info');
   myLogger.warn('a warning');
   myLogger.error('an error');
</pre>
<div class="warning">
<div class="label">Warning</div>
<div class="content">
            	If you test these snippets nothing will happen and you will probaby wounder
            	why. The problem is that the logger is not configured currently. Logging
            	is by default disabled that the behaviour of your scripts is not different
            	to the scripts before using <em>Log4js</em>.
            </div>
</div>
</div>
        
<a name="N100F5"></a><a name="configuration"></a>
<h2 class="underlined_10">Configuration</h2>
<div class="section">
<p>
            	Currently there are already logs in the scripts but the events are not shown. The
            	logger has to be configured for that now.
            </p>
<a name="N100FE"></a><a name="loglevel"></a>
<h3 class="underlined_5">Define Logging Level</h3>
<p>
					First the logging level has to be defined. There are several levels
					for logging. They are the same as the Java<sup>TM</sup> implementation
					log4j is using.
				</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
					
<caption>Log4js Log Levels</caption>
					
<tr>
						
<th colspan="1" rowspan="1">Log4js.Level</th><th colspan="1" rowspan="1">Description</th>
					
</tr>
					
<tr>
						
<td colspan="1" rowspan="1">OFF</td><td colspan="1" rowspan="1">nothing is logged</td>
					
</tr>
					
<tr>
						
<td colspan="1" rowspan="1">FATAL</td><td colspan="1" rowspan="1">fatal errors are logged</td>
					
</tr>
					
<tr>
						
<td colspan="1" rowspan="1">ERROR</td><td colspan="1" rowspan="1">errors are logged</td>
					
</tr>
					
<tr>
						
<td colspan="1" rowspan="1">WARN</td><td colspan="1" rowspan="1">warnings are logged</td>
					
</tr>
					
<tr>
						
<td colspan="1" rowspan="1">INFO</td><td colspan="1" rowspan="1">infos are logged</td>
					
</tr>
					
<tr>
						
<td colspan="1" rowspan="1">DEBUG</td><td colspan="1" rowspan="1">debug infos are logged</td>
					
</tr>
					
<tr>
						
<td colspan="1" rowspan="1">TRACE</td><td colspan="1" rowspan="1">traces are logged</td>
					
</tr>
					
<tr>
						
<td colspan="1" rowspan="1">ALL</td><td colspan="1" rowspan="1">everything is logged</td>
					
</tr>
				
</table>
<p>
					The levels are cumulative. If you for example set the logging
					level to <span class="codefrag">WARN</span> all warnings, errors and fatals are
					logged:
					<br>
<br>
					
<span class="codefrag">myLogger.setLevel(Log4js.Level.WARN);</span>
					
<br>
<br>
					If everything should be logged, use:
					<br>
<br>
					
<span class="codefrag">myLogger.setLevel(Log4js.Level.ALL);</span>
					
<br>
<br>
				
</p>
<a name="N10195"></a><a name="appender"></a>
<h3 class="underlined_5">Define Appender</h3>
<p>
                    After defining the log level, we have to set up an appender.
                    An appender is required to define, how the logging events are 
                    processed. Where they should be shown or stored etc.
                </p>
<p>
                    For the first example the <span class="codefrag">ConsoleAppender</span> will be used. The 
                    other apenders are described later. The <span class="codefrag">ConsoleAppender</span> can
                    be used in two modes: 
                </p>
<ul>
                	
<li>inline console within the current page</li>
                	
<li>separate console window</li>
                
</ul>
<p>
                	  The inline console is hidden by default and can be activated by pressing <span class="codefrag">ALT+D</span>.
                	  The <span class="codefrag">ConsoleAppender</span> can be added by following line as inline console:
                	  <br>
<br>
                		
<span class="codefrag">myLogger.addAppender( new ConsoleAppender(true) );</span>
                	  
<br>
<br>
                
</p>
<p>
                	  Now the logger is ready to be used. Try again some calls like
                </p>
<pre class="code">
   myLogger.info('an info');
   myLogger.warn('a warning');
   myLogger.error('an error');
   </pre>
<p>
					The <span class="codefrag">example.html</span> should look like following lines:
				</p>
<pre class="code">
  &lt;html&gt;
  &lt;head&gt;
   &lt;title&gt;Log4js Example&lt;/title&gt;
   
   &lt;script src="js/log4js.js" type="text/javascript"&gt;&lt;/script&gt;
   &lt;script&gt;&lt;!--
       myLogger.setLevel(Log4js.Level.ALL);
       myLogger.addAppender(new ConsoleAppender(true);
   //--&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
   &lt;script&gt;&lt;!--
      myLogger.info('an info');
      myLogger.warn('a warning');
      myLogger.error('an error');
   //--&gt;&lt;/script&gt;	
  &lt;/body&gt;
  &lt;/html&gt;
  </pre>
<p>
					If you open the console by pressing <span class="codefrag">ALT + D</span> 
					(in Firefox &gt; 2.0 press <span class="codefrag">SHIFT+ALT+D</span>
					you will find the logged events like in the image below.
				</p>
<p>
					
<img alt="Example of ConsoleAppender" src="images/users-guide/consoleExample.jpg" title="Example of ConsoleApender">
				</p>
<p>
					
<strong>Congratulations, now you are ready to use <em>Log4js</em> in your 
					project!
					The further sections you need only to read if you require more details
					how to configure and use <em>Log4js</em>.</strong>
				
</p>
</div>
		
<a name="N101F2"></a><a name="advanced"></a>
<h2 class="underlined_10">Advanced</h2>
<div class="section">
<p>
					
<em>Log4js</em> is a flexible API where you can define several different 
					<span class="codefrag">Appenders</span> as it is required in your project. 
					As the <span class="codefrag">addAppender</span>-method implies, it is possible to
					set more than one appender for a logger. It is possible to set for example an
					appender which logst to the shown console and one which sends the logging events 
					via AJAX' XmlHttpRequest to your server.
				</p>
<p>
					The Layout of the logged messages is also configurable, but this depends also on
					the appender which is taken. For example if you are using the AjaxAppender, you can
					send the events JSON or XML formatted to process them on the server. For
					more details have a look at the <a href="http://log4js.berlios.de/apidocs/index.html">API documentation</a>
					and the next sections.
				</p>
<a name="N1020C"></a><a name="classdiagramm"></a>
<h3 class="underlined_5">Class Diagram</h3>
<p>
                	The class diagram below, will provide a short overview about the logger,
                	its appenders and the layout classes and their dependencies.
                </p>
<p>
                    
<img alt="Class Diagram" src="images/Log4js-UML.jpg" title="Class Diagram">
                </p>
<a name="N1021E"></a><a name="ajax"></a>
<h3 class="underlined_5">Usage of AjaxAppender</h3>
<p>
            		
<em>Log4js</em> supports also sending the logging events via
            		<span class="codefrag">XmlHttpRequest</span> asynchronous to the server. This appender
            		give you the most flexibility in productive systems to log JavaScript
            		methods. As you have no access to the browsers in live systems, you 
            		can enable the AjaxAppender to send the logs asynchronous to the server.
            		On the server the logs can be processed for example using a simple
            		JSP file like in the examples to store them via log4js.
            	</p>
<p>
            		The AjaxAppender requires an URL to send the logs to. Because of
            		security it can be only a relative URL on the same server:
            	</p>
<pre class="code">
   var ajaxLog = new Log4js.getLogger("ajaxTest");
   ajaxLog.setLevel(Log4js.Level.ALL);
   var ajaxAppender = new AjaxAppender("./log4j.jsp");
   ajaxAppender.setThreshold(5);
   ajaxLog.addAppender(ajaxAppender);
            	</pre>
<p>
            	In the source example, the AjaxAppender sends the logging events to the 
            	relative URL <span class="codefrag">./log4j.jsp</span>. Defining a threshold, the appender
            	collects the events until this threshold is reached to send then all the
            	collected events in one request.
            </p>
<p>
            	By default the AjaxAppender uses the XMLLayout, which transforms the
            	logging events to XML. But it is also possible to set another layout
            	like JSONLayout or HTMLLayout if you prefer.
            </p>
<p>
            	The XMLLayout uses a format like following example:
            </p>
<pre class="code">
  &lt;log4js:eventSet version="0.3" xmlns:log4js="http://log4js.berlios.de/log4js/"&gt;
      &lt;log4js:event logger="ajaxTest" level="TRACE" 
         client="Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.8.1b1) Gecko/20060710 Firefox/2.0b1" 
         referer="http://localhost:8080/log4js-example-0.3/" 
         timestamp="2006-08-02T17:40:32+02:00"&gt;
              &lt;log4js:message&gt;&lt;![CDATA[I was traced!]]&gt;&lt;/log4js:message&gt;
      &lt;/log4js:event&gt;
      &lt;log4js:event logger="ajaxTest" level="DEBUG" 
         client="Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.8.1b1) Gecko/20060710 Firefox/2.0b1" 
         referer="http://localhost:8080/log4js-example/" 
         timestamp="2006-08-02T17:40:32+02:00"&gt;
              &lt;log4js:message&gt;&lt;![CDATA[I was debuged!]]&gt;&lt;/log4js:message&gt;
      &lt;/log4js:event&gt;
      &lt;log4js:event logger="ajaxTest" level="INFO" 
         client="Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.8.1b1) Gecko/20060710 Firefox/2.0b1" 
         referer="http://log4js.berlios.de/log4js/" 
         timestamp="2006-08-02T17:40:33+02:00"&gt;
              &lt;log4js:message&gt;&lt;![CDATA[I was informed!]]&gt;&lt;/log4js:message&gt;
      &lt;/log4js:event&gt;
  &lt;/log4js:eventSet&gt;
            </pre>
<div class="note">
<div class="label">Note</div>
<div class="content">
            	This format is very similar to the XML format of log4j. 
				The <a href="/log4js/log4js.xsd">log4js.xsd</a> defines the 
				<span class="codefrag">eventSet</span> and the server <span class="codefrag">response</span>. 
            </div>
</div>
<p>
            	In contrast to the XML format of log4j <em>Log4js</em> provides also the id of the
            	client browser and the referer URL to identify the sources. On the other hand some
            	advanced features like <span class="codefrag">NDC</span> are not supported currently in <em>Log4js</em>.
            </p>
<a name="N1025E"></a><a name="performance"></a>
<h3 class="underlined_5">Performance</h3>
<p>
            		To improve the performance of your software, it is a good idea to surround
            		your logging statements with appropriate isXXXEnabled() methods to evaluate
            		before logging if the required logging level is enabled:
            	</p>
<pre class="code">
  if( myLogger.isDebugEnabled()) {
	myLogger.debug(...);
  }
            	</pre>
<p>
            		If debug is disabled, it is much faster to evaluate only if it is disabled
            		than constructing a possible complex message before finding debug level
            		disabled. But this makes only sense when the messages are a little bit
            		more complex than just log a simple string. Otherwise the sources are
            		blown up too much with condition statements which is not much readable.
            	</p>
<a name="N1026F"></a><a name="newClasses"></a>
<h3 class="underlined_5">Create new Appenders and Layouts</h3>
<p>
            		There is already a small set of appenders and layouting classes, but probably
            		you need another feature, which is not implemented in <em>Log4js</em>. For this
            		it is possible to enhance the API for special features.
            	</p>
<div class="note">
<div class="label">Share your Extentions</div>
<div class="content">
            		If it is a feature which is usable also by other developers, please share
            		your extensions by providing patches. See also the <a href="/project/index.html">project
            			development</a> section.
            	</div>
</div>
</div>
        
<a name="N10285"></a><a name="license"></a>
<h2 class="underlined_10">License</h2>
<div class="section">
<pre class="code">            
  Copyright 2002-2004 The Apache Software Foundation or its licensors,
  as applicable.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.            
</pre>
</div>

        
<a name="N10291"></a><a name="references"></a>
<h2 class="underlined_10">References</h2>
<div class="section">
<ul>
                
<li>
<a href="http://log4js.berlios.de">Log4js Website</a>
</li>
                
<li>
<a href="http://scratchpad.wikia.com/wiki/Log4js">Log4js WIKI</a>
</li>
                
<li>
<a href="http://logging.apache.org">Apache Logging Website</a>
</li>
            
</ul>
</div>
    </section>

        <aside id="sidebar">
		<a href="https://github.com/stritti/log4js/zipball/master" class="button">
			<small>Download</small>
			.zip file
		</a>
		<a href="https://github.com/stritti/log4js/tarball/master" class="button">
			<small>Download</small>
			.tar.gz file
		</a>
		
		<p class="repo-owner"><a href="https://github.com/stritti/log4js"></a> is maintained by <a href="https://github.com/stritti">stritti</a>.</p>
		
		<p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
       
		<div class="ad" id="adStripe">
		<script src="http://www.ohloh.net/p/93288/widgets/project_users.js" type="text/javascript"></script>
		<br>
		<script type="text/javascript">
		<!--
					google_ad_client = "pub-2184810574476423";
					google_ad_width = 160;
					google_ad_height = 600;
					google_ad_format = "160x600_as";
					google_ad_type = "text_image";
					//2007-04-24: log4js
					google_ad_channel = "0813063002";
					google_color_border = "FFFFFF";
					google_color_bg = "FFFFFF";
					google_color_link = "009ACE";
					google_color_text = "000000";
					google_color_url = "000066";
					//--></script><script src="http://pagead2.googlesyndication.com/pagead/show_ads.js" type="text/javascript"></script>
		</div>       
        </aside>
      </div>
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-327996-12', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>

